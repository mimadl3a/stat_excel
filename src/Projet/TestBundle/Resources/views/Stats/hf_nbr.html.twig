{% extends 'PBundle:Layout:sb-admin.html.twig' %} {% block body %} {{
parent() }}
<div class="container-fluid col-sm-11 col-sm-offset-1">
	<div class="row">
		<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">

			<br> {% for flashMessage in app.session.flashbag.get('erreur') %}
			<div class="alert bg-info">
				<strong>{{ flashMessage|raw }}</strong>
			</div>
			{% endfor %}

			<div class="col-lg-12">

				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title">
							<i class="fa fa-bar-chart-o"></i> Pyramide des ages
						</h3>
					</div>
					<div class="panel-body">
						<div id="chart_div" style="height: 350px;"></div>
					</div>
				</div>
			</div>

			<div class="col-lg-6">

				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title">
							<i class="fa fa-bar-chart-o"></i> Statistiques par type de contrat
						</h3>
					</div>
					<div class="panel-body">
						<div id="graph_cty"></div>
					</div>
				</div>
			</div>
			<div class="col-lg-6">

				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title">
							<i class="fa fa-bar-chart-o"></i> Statistiques par sexe
						</h3>
					</div>
					<div class="panel-body">
						<div id="graph"></div>
					</div>
				</div>
			</div>
			
			
	<script type="text/javascript" src="{{ asset('js/jsapi') }}"></script>
    <script type="text/javascript">
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(chart);

        function chart()
        {
            var dataArray = {{ stats_age|raw }};

            var data = google.visualization.arrayToDataTable(dataArray);
            var chart = new google.visualization.BarChart(document.getElementById('chart_div'));

            var options = {
                isStacked: true,
                hAxis: {
                    format: ';'
                },
                vAxis: {
                    direction: -1
                },
                animation: {
                    duration: 1000,
                    easing: 'out'
                }
            };
            
            var formatter = new google.visualization.NumberFormat({
                pattern: ';'
            });

            formatter.format(data, 2);
            chart.draw(data, options);
        }

    </script>

			<!-- Page Specific Plugins -->
			<script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
			<script src="http://cdn.oesmith.co.uk/morris-0.4.3.min.js"></script>
			<script src="{{ asset('sb-admin/js/morris/chart-data-morris.js') }}"></script>
			<script type="text/javascript">
			
			function stats() {
				window.b = Morris.Donut({
					element: 'graph_cty',
					data: {{ stats_ctype|raw }},
					colors:[{{ couleur1|raw }}]
				});
				window.c = Morris.Donut({
					element: 'graph',
					data: {{ stats|raw }},
					colors:[{{ couleur|raw }}]
				});
			}
			
			$(document).ready(function() {
				stats();

				var StatsResize2;
				var StatsResize3;
				
			    $(window).resize(function(event){
			    	event.preventDefault();

			    	clearTimeout(StatsResize2);
			    	StatsResize2 = setTimeout(window.b.redraw(), 1000);
			    	clearTimeout(StatsResize3);
			    	StatsResize3 = setTimeout(window.c.redraw(), 1000);
			    });
			});
			</script>
		</div>
	</div>
</div>
{% endblock %}
